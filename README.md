### Установка

Подключение клиента можно выполнить (при наличии) с помощью менеджера
зависимостей composer или скачать в виде архива в соответствующем
разделе.

```
composer require giftery/api-client:dev-sms
```

Процедура установки composer описана на странице
https://getcomposer.org/download/

### Быстрый старт

```
<?php

use Giftery\classes\exception\ApiException;
use Giftery\classes\exception\HttpException;
use Giftery\classes\data\PushSmsData;
use Giftery\GifteryApiClient;

try {
    $message = new PushSmsData();

    $message->setTo("79001234567");
    $message->setText("...");

    // Или

    $message->set([
        'to' => "79001234567",
        'text' => "...",
    ]);

    $api = new GifteryApiClient(1, 'VeryVerySecretString');
    $response = $api->callPushSms($message);
    $queue_id = $response->getQueueId();
} catch (ApiException $e) {
    // Обработка ошибок API (например, недостаточно средств, неактивный
    // продукт, превышен лимит и т.д.)
    $message = $e->getMessage();
    $code = $e->getCode();
    $raw_response = $e->getResponse(); // Ответ сервера для логирования
} catch (HttpException $e) {
    // Обработка ошибок подключения к серверу
    $message = $e->getMessage();
} catch (Exception $e) {
    // Обработка ошибок подключения к серверу, ошибок валиадации
    // параметров и прочее
    $message = $e->getMessage();
}
```

### Список доступных методов GifteryApiClient

* callPushSms()

### callPushSms()

В случае успешного приёма сообщения к отправке вернёт объект класса
`PushSmsResponse`. В нём доступен один метод `getQueueId`, в данном
контексте идентификатор не несёт особого смысла. Получение `queue_id` не
гарантирует доставку, оно означает лишь успешное помещение сообщения во
внутренню очередь обработчика сообщений. На данном этапе у нас нет
возможности отследить доставку.

В случае сетевых ошибок будет выброшено исключение `HttpException`.
Повторный запрос в случае сетевой ошибки при нормальной работе сети
*должен* быть успешным.

В случае ошибок со стороны внешнего API будет выброшено `ApiException`.
В данный момент здесь может быть два кода ошибки `1001` и `1502196936`.
Первый означает ошибку валидации входящих параметров на стороне API,
второй ошибку добавления смс в очередь внутренного обработчика. В первом
случае без изменения параметров не имеет смысла пытаться повторять
запрос. Во втором случае повторный запрос *может* быть успешным.
В очень редких случаях возможно получение других кодов ошибок (например,
код `-1`). Все их перечислять здесь нет возможности. Повторый запрос в
случае неописанного кода ошибки *может* быть успешным. Повторять один
запрос более двух раз, получая один код ошибки, нет смысла. В таком
случае следует обратиться за информацией к нам.

Прочие исключения будут сигнализировать об ошибках в передаваемых
значениях агрументов (валидация на стороне библиотеки). В таком случае
могут быть выброшены исключения `UnexpectedValueException` и
`RangeException`. Случаи, в которых выбрасываются указанные исключения
описаны в комментариях в классе `PushSmsData`
